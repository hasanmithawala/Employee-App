<form [formGroup]="employeeForm" (ngSubmit)="onSubmit()" novalidate>
  <label for="employeeCode">Employee Code:</label>
  <input
    type="text"
    id="employeeCode"
    formControlName="employeeCode"
    [ngClass]="{
      error:
        employeeForm.get('employeeCode')?.errors &&
        (employeeForm.get('employeeCode')?.touched ||
          employeeForm.get('employeeCode')?.dirty)
    }"
  />
  <div
    *ngIf="
      employeeForm.get('employeeCode')!.errors?.['required'] &&
      (employeeForm.get('employeeCode')!.touched ||
        employeeForm.get('employeeCode')!.dirty)
    "
    class="error-message"
  >
    Employee Code is required.
  </div>

  <div
    *ngIf="
      employeeForm.get('employeeCode')!.errors?.['pattern'] &&
      (employeeForm.get('employeeCode')!.touched ||
        employeeForm.get('employeeCode')!.dirty)
    "
    class="error-message"
  >
    Employee Code should match the pattern (e.g., emp123).
  </div>

  <label for="employeeName">Employee Name:</label>
  <input
    type="text"
    id="employeeName"
    formControlName="employeeName"
    [ngClass]="{
      error:
        employeeForm.get('employeeName')?.errors &&
        (employeeForm.get('employeeName')?.touched ||
          employeeForm.get('employeeName')?.dirty)
    }"
  />
  <div
    *ngIf="
      employeeForm.get('employeeName')!.errors?.['required'] &&
      (employeeForm.get('employeeName')!.touched ||
        employeeForm.get('employeeName')!.dirty)
    "
    class="error-message"
  >
    Employee Name is required.
  </div>

  <label for="department">Department:</label>
  <select
    id="department"
    formControlName="department"
    (change)="onDepartmentChange()"
    [ngClass]="{
      error:
        employeeForm.get('department')?.errors &&
        (employeeForm.get('department')?.touched ||
          employeeForm.get('department')?.dirty)
    }"
  >
    <option value="">Select Department</option>
    <option *ngFor="let department of departments" [value]="department.name">
      {{ department.name }}
    </option>
  </select>
  <div
    *ngIf="
      employeeForm.get('department')!.errors?.['required'] &&
      (employeeForm.get('department')!.touched ||
        employeeForm.get('department')!.dirty)
        
    "
    class="error-message"
  >
    Department is required.
  </div>

  <label for="designation">Designation:</label>
  <select
    id="designation"
    formControlName="designation"
    [ngClass]="{
      error:
        employeeForm.get('designation')?.errors &&
        (employeeForm.get('designation')?.touched ||
          employeeForm.get('designation')?.dirty)
    }"
  >
    <option value="">Select Designation</option>
    <option *ngFor="let designation of designations" [value]="designation">
      {{ designation }}
    </option>
  </select>
  <div
    *ngIf="
      employeeForm.get('designation')!.errors?.['required'] &&
      (employeeForm.get('designation')!.touched ||
        employeeForm.get('designation')!.dirty)
    "
    class="error-message"
  >
    Designation is required.
  </div>

  <label for="dob">Date of Birth:</label>
  <input
    type="date"
    id="dob"
    formControlName="dob"
    [ngClass]="{
      error:
        employeeForm.get('dob')?.errors &&
        (employeeForm.get('dob')?.touched || employeeForm.get('dob')?.dirty)
    }"
  />
  <div
    *ngIf="
      employeeForm.get('dob')!.errors?.['required'] &&
      (employeeForm.get('dob')!.touched || employeeForm.get('dob')!.dirty)
    "
    class="error-message"
  >
    Date of Birth is required.
  </div>
  <div
    *ngIf="
      employeeForm.get('dob')!.errors?.['dateInFuture'] &&
      (employeeForm.get('dob')!.touched || employeeForm.get('dob')!.dirty)
    "
    class="error-message"
  >
    Date of Birth cannot be in the future.
  </div>

  <label for="doj">Date of Join:</label>
  <input
    type="date"
    id="doj"
    formControlName="doj"
    [ngClass]="{
      error:
        employeeForm.get('doj')?.errors &&
        (employeeForm.get('doj')?.touched || employeeForm.get('doj')?.dirty)
    }"
  />
  <div
    *ngIf="
    employeeForm.get('doj')!.errors?.['required'] &&
    (employeeForm.get('doj')!.touched || employeeForm.get('doj')!.dirty)
  "
    class="error-message"
  >
    Date of Join is required.
  </div>

  <div
    *ngIf="employeeForm.get('doj')?.hasError('ageLessThan18')"
    class="error-message"
  >
    Employee's Age must be 18 years or older.
  </div>
  <div>
    <label for="state">State:</label>
    <select
      id="state"
      formControlName="state"
      (change)="onStateChange()"
      [ngClass]="{
        error:
          employeeForm.get('state')?.errors &&
          (employeeForm.get('state')?.touched ||
            employeeForm.get('state')?.dirty)
      }"
    >
      <option value="">Select state</option>
      <option *ngFor="let state of states" [value]="state.ST">
        {{ state.STNM }}
      </option>
    </select>
    <div
      *ngIf="
        employeeForm.get('state')!.errors?.['required'] &&
        (employeeForm.get('state')!.touched || employeeForm.get('state')!.dirty)
      "
      class="error-message"
    >
      State is required.
    </div>
  </div>

  <div>
    <label for="city">City:</label>
    <select
      id="city"
      formControlName="city"
      [ngClass]="{
        error:
          employeeForm.get('city')?.errors &&
          (employeeForm.get('city')?.touched || employeeForm.get('city')?.dirty)
      }"
    >
      <option value="">Select city</option>
      <option *ngFor="let city of cities" [value]="city">
        {{ city }}
      </option>
    </select>
    <div
      *ngIf="
        employeeForm.get('city')!.errors?.['required'] &&
        (employeeForm.get('city')!.touched || employeeForm.get('city')!.dirty)
      "
      class="error-message"
    >
      City is required.
    </div>
  </div>

  <button type="submit">Add Employee</button>
</form>
<!-- only frontend for edit and delete updating employee Details are remaining  -->
<div class="container">
  <h2>Employee Data</h2>
  <table class="table">
    <thead>
      <tr>
        <th>Employee Code</th>
        <th>Employee Name</th>
        <th>Department</th>
        <th>Designation</th>
        <th>Date of Birth</th>
        <th>Date of Join</th>
        <th>State</th>
        <th>City</th>
        <th>Edit</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let employee of employees; let i = index">
        <td>{{ employee.employeeCode }}</td>
        <td>{{ employee.employeeName }}</td>
        <td>{{ employee.department }}</td>
        <td>{{ employee.designation }}</td>
        <td>{{ employee.dob | date : "shortDate" }}</td>
        <td>{{ employee.doj | date : "shortDate" }}</td>
        <td>{{ employee.state }}</td>
        <td>{{ employee.city }}</td>
        <td>
          <button class="btn btn-success edit-btn">Edit</button>
          <button class="btn btn-danger delete-btn">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
